[{"rendered_body":"\n\u003ch1\u003e\n\u003cspan id=\"はじめに\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eはじめに\u003c/h1\u003e\n\n\u003cp\u003eこの記事は\u003ca href=\"https://qiita.com/advent-calendar/2017/ruby\"\u003eRuby Advent Calendar 2017\u003c/a\u003e15日目の記事です。\u003cbr\u003e\n遅くなってすみません💦\u003cbr\u003e\nGTKについても調べながら書いているので、\u003cbr\u003e\n間違いなどあったらご指摘お願いします。\u003c/p\u003e\n\n\u003cp\u003e今回はRubyでGTKを使ったクリエィティブコーディングについて書きたいと思います。\u003cbr\u003e\nGTKと言ってもOpenGLを使った描画など、\u003cbr\u003e\n色々あるそうなので今回はCairo(Gtk::DrawingArea)を使ったものを紹介します。\u003c/p\u003e\n\n\u003cp\u003eまずruby-gnome2をインストールします。\u003cbr\u003e\nインストール方法は以前\u003ca href=\"https://qiita.com/enkatsu/items/a5b15ee2aa8913b4f554\" id=\"reference-4f6cc57524e8196a10e0\"\u003eこちら\u003c/a\u003eに書いたので参考にしてください。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"使い方\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E4%BD%BF%E3%81%84%E6%96%B9\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e使い方\u003c/h1\u003e\n\n\u003cp\u003eまずシンプルに円を表示します。\u003cbr\u003e\n\u003ccode\u003econtext.scale 0.5, 0.5\u003c/code\u003eしているのは、\u003cbr\u003e\nなぜか2倍で表示されてしまうからなんですけどなんでなんでしょう……\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"ruby\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"nb\"\u003erequire\u003c/span\u003e \u003cspan class=\"s1\"\u003e'gtk3'\u003c/span\u003e\n\n\u003cspan class=\"n\"\u003ewidth\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e300\u003c/span\u003e\n\u003cspan class=\"n\"\u003eheight\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e300\u003c/span\u003e\n\n\u003cspan class=\"n\"\u003ewindow\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"no\"\u003eGtk\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"no\"\u003eWindow\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003enew\u003c/span\u003e\n\u003cspan class=\"n\"\u003ewindow\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eset_size_request\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ewidth\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eheight\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"n\"\u003edrawing_area\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"no\"\u003eGtk\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"no\"\u003eDrawingArea\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003enew\u003c/span\u003e\n\u003cspan class=\"n\"\u003edrawing_area\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eset_size_request\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ewidth\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eheight\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"n\"\u003edrawing_area\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003esignal_connect\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"ss\"\u003e:draw\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"k\"\u003edo\u003c/span\u003e\n  \u003cspan class=\"n\"\u003econtext\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003edrawing_area\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ewindow\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ecreate_cairo_context\u003c/span\u003e\n  \u003cspan class=\"n\"\u003econtext\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003escale\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"mi\"\u003e5\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"mi\"\u003e5\u003c/span\u003e\n\n  \u003cspan class=\"c1\"\u003e# background color\u003c/span\u003e\n  \u003cspan class=\"n\"\u003econtext\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eset_source_rgb\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"n\"\u003econtext\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003epaint\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\n\n  \u003cspan class=\"c1\"\u003e# fill color\u003c/span\u003e\n  \u003cspan class=\"n\"\u003econtext\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eset_source_rgb\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"c1\"\u003e# arc(x, y, r, start, end)\u003c/span\u003e\n  \u003cspan class=\"n\"\u003econtext\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003earc\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ewidth\u003c/span\u003e \u003cspan class=\"o\"\u003e/\u003c/span\u003e \u003cspan class=\"mi\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eheight\u003c/span\u003e \u003cspan class=\"o\"\u003e/\u003c/span\u003e \u003cspan class=\"mi\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e150\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e2\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"no\"\u003eMath\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"no\"\u003ePI\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"n\"\u003econtext\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003efill\u003c/span\u003e\n\u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\n\u003cspan class=\"n\"\u003efixed\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"no\"\u003eGtk\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"no\"\u003eFixed\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003enew\u003c/span\u003e\n\u003cspan class=\"n\"\u003efixed\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eput\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003edrawing_area\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"n\"\u003ewindow\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eadd\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003efixed\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"n\"\u003ewindow\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eshow_all\u003c/span\u003e\n\u003cspan class=\"n\"\u003ewindow\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003esignal_connect\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"ss\"\u003e:destroy\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"no\"\u003eGtk\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003emain_quit\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"no\"\u003eGtk\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003emain\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/c721d4975c842768474aa07dbbc13f7eefa434ef/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f38303831362f35623334333865342d646437632d326531642d373133322d6666376334306338326639312e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://camo.qiitausercontent.com/c721d4975c842768474aa07dbbc13f7eefa434ef/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f38303831362f35623334333865342d646437632d326531642d373133322d6666376334306338326639312e706e67\" alt=\"スクリーンショット 2017-12-15 3.25.09.png\" title=\"スクリーンショット 2017-12-15 3.25.09.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/80816/5b3438e4-dd7c-2e1d-7132-ff7c40c82f91.png\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"フラクタル\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%95%E3%83%A9%E3%82%AF%E3%82%BF%E3%83%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eフラクタル\u003c/h1\u003e\n\n\u003cp\u003eせっかくなんでよくある円の入れ子になったフラクタルも書きます。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"ruby\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"nb\"\u003erequire\u003c/span\u003e \u003cspan class=\"s1\"\u003e'gtk3'\u003c/span\u003e\n\n\u003cspan class=\"n\"\u003ewidth\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e300\u003c/span\u003e\n\u003cspan class=\"n\"\u003eheight\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e300\u003c/span\u003e\n\n\u003cspan class=\"n\"\u003ewindow\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"no\"\u003eGtk\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"no\"\u003eWindow\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003enew\u003c/span\u003e\n\u003cspan class=\"n\"\u003ewindow\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eset_size_request\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ewidth\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eheight\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"n\"\u003edrawing_area\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"no\"\u003eGtk\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"no\"\u003eDrawingArea\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003enew\u003c/span\u003e\n\u003cspan class=\"n\"\u003edrawing_area\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eset_size_request\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ewidth\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eheight\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003edraw_circle\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003econtext\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003er\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ec\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"o\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"o\"\u003e]\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"n\"\u003econtext\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eset_source_rgba\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ec\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"n\"\u003econtext\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003earc\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003er\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e2\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"no\"\u003eMath\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"no\"\u003ePI\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"n\"\u003econtext\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003estroke\u003c/span\u003e\n\u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003edraw_fractal_circle\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003econtext\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003er\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ec\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"o\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"o\"\u003e]\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003en\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"kp\"\u003enil\u003c/span\u003e \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"n\"\u003en\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\n  \u003cspan class=\"n\"\u003edraw_circle\u003c/span\u003e \u003cspan class=\"n\"\u003econtext\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003er\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ec\u003c/span\u003e\n  \u003cspan class=\"n\"\u003enext_r\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003er\u003c/span\u003e \u003cspan class=\"o\"\u003e/\u003c/span\u003e \u003cspan class=\"mi\"\u003e2\u003c/span\u003e\n  \u003cspan class=\"n\"\u003ex1\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u003c/span\u003e \u003cspan class=\"n\"\u003enext_r\u003c/span\u003e\n  \u003cspan class=\"n\"\u003edraw_fractal_circle\u003c/span\u003e \u003cspan class=\"n\"\u003econtext\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ex1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003enext_r\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ec\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003en\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\n  \u003cspan class=\"n\"\u003ex2\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"n\"\u003enext_r\u003c/span\u003e\n  \u003cspan class=\"n\"\u003edraw_fractal_circle\u003c/span\u003e \u003cspan class=\"n\"\u003econtext\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ex2\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003enext_r\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ec\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003en\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\n\u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\n\u003cspan class=\"n\"\u003edrawing_area\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003esignal_connect\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"ss\"\u003e:draw\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"k\"\u003edo\u003c/span\u003e\n  \u003cspan class=\"n\"\u003econtext\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003edrawing_area\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ewindow\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ecreate_cairo_context\u003c/span\u003e\n  \u003cspan class=\"n\"\u003econtext\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003escale\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"mi\"\u003e5\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"mi\"\u003e5\u003c/span\u003e\n  \u003cspan class=\"n\"\u003econtext\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eset_source_rgb\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"n\"\u003econtext\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003epaint\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\n\n  \u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ewidth\u003c/span\u003e \u003cspan class=\"o\"\u003e/\u003c/span\u003e \u003cspan class=\"mi\"\u003e2\u003c/span\u003e\n  \u003cspan class=\"n\"\u003ey\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eheight\u003c/span\u003e \u003cspan class=\"o\"\u003e/\u003c/span\u003e \u003cspan class=\"mi\"\u003e2\u003c/span\u003e\n  \u003cspan class=\"n\"\u003er\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e150\u003c/span\u003e\n  \u003cspan class=\"n\"\u003ered\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\n  \u003cspan class=\"n\"\u003egreen\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"mi\"\u003e7\u003c/span\u003e\n  \u003cspan class=\"n\"\u003eblue\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\n  \u003cspan class=\"n\"\u003ealpha\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"mi\"\u003e5\u003c/span\u003e\n  \u003cspan class=\"n\"\u003edraw_fractal_circle\u003c/span\u003e \u003cspan class=\"n\"\u003econtext\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003er\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"o\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003ered\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003egreen\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eblue\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ealpha\u003c/span\u003e\u003cspan class=\"o\"\u003e]\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e5\u003c/span\u003e\n\u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\n\u003cspan class=\"n\"\u003efixed\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"no\"\u003eGtk\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"no\"\u003eFixed\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003enew\u003c/span\u003e\n\u003cspan class=\"n\"\u003efixed\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eput\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003edrawing_area\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"n\"\u003ewindow\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eadd\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003efixed\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"n\"\u003ewindow\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eshow_all\u003c/span\u003e\n\u003cspan class=\"n\"\u003ewindow\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003esignal_connect\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"ss\"\u003e:destroy\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"no\"\u003eGtk\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003emain_quit\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"no\"\u003eGtk\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003emain\u003c/span\u003e\n\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/44ecb83f9bbd957083503b76ed677fd36e522cc3/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f38303831362f33376635613564372d613966632d326264302d643036352d6633663763313061393962352e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://camo.qiitausercontent.com/44ecb83f9bbd957083503b76ed677fd36e522cc3/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f38303831362f33376635613564372d613966632d326264302d643036352d6633663763313061393962352e706e67\" alt=\"スクリーンショット 2017-12-15 3.47.27.png\" title=\"スクリーンショット 2017-12-15 3.47.27.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/80816/37f5a5d7-a9fc-2bd0-d065-f3f7c10a99b5.png\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"パーリンノイズ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%91%E3%83%BC%E3%83%AA%E3%83%B3%E3%83%8E%E3%82%A4%E3%82%BA\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eパーリンノイズ\u003c/h1\u003e\n\n\u003cp\u003eパーリンノイズを生成するGemがあったのでこれを使えば、\u003cbr\u003e\nノイズを使った表現もできます。\u003cbr\u003e\n\u003ca href=\"https://github.com/junegunn/perlin_noise\" rel=\"nofollow noopener\" target=\"_blank\"\u003eperlin_noise\u003c/a\u003e\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"ruby\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"nb\"\u003erequire\u003c/span\u003e \u003cspan class=\"s1\"\u003e'gtk3'\u003c/span\u003e\n\u003cspan class=\"nb\"\u003erequire\u003c/span\u003e \u003cspan class=\"s1\"\u003e'perlin_noise'\u003c/span\u003e\n\n\u003cspan class=\"n\"\u003ewidth\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e300\u003c/span\u003e\n\u003cspan class=\"n\"\u003eheight\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e300\u003c/span\u003e\n\n\u003cspan class=\"n\"\u003ewindow\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"no\"\u003eGtk\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"no\"\u003eWindow\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003enew\u003c/span\u003e\n\u003cspan class=\"n\"\u003ewindow\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eset_size_request\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ewidth\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eheight\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"n\"\u003edrawing_area\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"no\"\u003eGtk\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"no\"\u003eDrawingArea\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003enew\u003c/span\u003e\n\u003cspan class=\"n\"\u003edrawing_area\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eset_size_request\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ewidth\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eheight\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003edraw_circle\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003econtext\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003er\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ec\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"o\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"o\"\u003e]\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"n\"\u003econtext\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eset_source_rgba\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ec\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"n\"\u003econtext\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003earc\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003er\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e2\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"no\"\u003eMath\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"no\"\u003ePI\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"n\"\u003econtext\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003efill\u003c/span\u003e\n\u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\n\u003cspan class=\"n\"\u003en2d\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"no\"\u003ePerlin\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"no\"\u003eNoise\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003enew\u003c/span\u003e \u003cspan class=\"mi\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ss\"\u003einterval\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"mi\"\u003e5\u003c/span\u003e\n\u003cspan class=\"n\"\u003econtrast\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"no\"\u003ePerlin\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"no\"\u003eCurve\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003econtrast\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"no\"\u003ePerlin\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"no\"\u003eCurve\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"no\"\u003eCUBIC\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"n\"\u003edrawing_area\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003esignal_connect\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"ss\"\u003e:draw\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"k\"\u003edo\u003c/span\u003e\n  \u003cspan class=\"n\"\u003econtext\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003edrawing_area\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ewindow\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ecreate_cairo_context\u003c/span\u003e\n  \u003cspan class=\"n\"\u003econtext\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003escale\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"mi\"\u003e5\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"mi\"\u003e5\u003c/span\u003e\n  \u003cspan class=\"n\"\u003econtext\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eset_source_rgb\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"n\"\u003econtext\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003epaint\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\n  \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003estep\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ewidth\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ewidth\u003c/span\u003e \u003cspan class=\"o\"\u003e/\u003c/span\u003e \u003cspan class=\"mi\"\u003e10\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"k\"\u003edo\u003c/span\u003e \u003cspan class=\"o\"\u003e|\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"o\"\u003e|\u003c/span\u003e\n    \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003estep\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eheight\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eheight\u003c/span\u003e \u003cspan class=\"o\"\u003e/\u003c/span\u003e \u003cspan class=\"mi\"\u003e10\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"k\"\u003edo\u003c/span\u003e \u003cspan class=\"o\"\u003e|\u003c/span\u003e\u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"o\"\u003e|\u003c/span\u003e\n      \u003cspan class=\"n\"\u003en\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003en2d\u003c/span\u003e\u003cspan class=\"o\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"mo\"\u003e01\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ey\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"mo\"\u003e01\u003c/span\u003e\u003cspan class=\"o\"\u003e]\u003c/span\u003e\n      \u003cspan class=\"n\"\u003en\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003econtrast\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ecall\u003c/span\u003e \u003cspan class=\"n\"\u003en\u003c/span\u003e\n      \u003cspan class=\"n\"\u003er\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ewidth\u003c/span\u003e \u003cspan class=\"o\"\u003e/\u003c/span\u003e \u003cspan class=\"mi\"\u003e10\u003c/span\u003e \u003cspan class=\"o\"\u003e/\u003c/span\u003e \u003cspan class=\"mi\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003en\u003c/span\u003e\n      \u003cspan class=\"n\"\u003ered\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\n      \u003cspan class=\"n\"\u003egreen\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\n      \u003cspan class=\"n\"\u003eblue\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\n      \u003cspan class=\"n\"\u003ealpha\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003en\u003c/span\u003e\n      \u003cspan class=\"n\"\u003edraw_circle\u003c/span\u003e \u003cspan class=\"n\"\u003econtext\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003er\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"o\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003ered\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003egreen\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eblue\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ealpha\u003c/span\u003e\u003cspan class=\"o\"\u003e]\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\n\u003cspan class=\"n\"\u003efixed\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"no\"\u003eGtk\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"no\"\u003eFixed\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003enew\u003c/span\u003e\n\u003cspan class=\"n\"\u003efixed\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eput\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003edrawing_area\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"n\"\u003ewindow\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eadd\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003efixed\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"n\"\u003ewindow\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eshow_all\u003c/span\u003e\n\u003cspan class=\"n\"\u003ewindow\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003esignal_connect\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"ss\"\u003e:destroy\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"no\"\u003eGtk\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003emain_quit\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"no\"\u003eGtk\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003emain\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/6eed1cd5a65f66c16379d707a1383af0b3335068/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f38303831362f66316236313161612d386438382d346364352d616161622d3966396136356663343236382e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://camo.qiitausercontent.com/6eed1cd5a65f66c16379d707a1383af0b3335068/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f38303831362f66316236313161612d386438382d346364352d616161622d3966396136356663343236382e706e67\" alt=\"スクリーンショット 2017-12-15 4.54.19.png\" title=\"スクリーンショット 2017-12-15 4.54.19.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/80816/f1b611aa-8d88-4cd5-aaab-9f9a65fc4268.png\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"まとめ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%BE%E3%81%A8%E3%82%81\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eまとめ\u003c/h1\u003e\n\n\u003cp\u003eこんな感じでRubyでもクリエィティブコーディングしてみました。\u003cbr\u003e\n今回は静止画 + 円縛りになっちゃいました。\u003cbr\u003e\nこれはこれでスケッチ感覚で楽しいですが、\u003cbr\u003e\nインタラクションのあるものとかもやってみたいです。\u003c/p\u003e\n","body":"\n# はじめに\n\nこの記事は[Ruby Advent Calendar 2017](https://qiita.com/advent-calendar/2017/ruby)15日目の記事です。\n遅くなってすみません💦\nGTKについても調べながら書いているので、\n間違いなどあったらご指摘お願いします。\n\n今回はRubyでGTKを使ったクリエィティブコーディングについて書きたいと思います。\nGTKと言ってもOpenGLを使った描画など、\n色々あるそうなので今回はCairo(Gtk::DrawingArea)を使ったものを紹介します。\n\nまずruby-gnome2をインストールします。\nインストール方法は以前[こちら](https://qiita.com/enkatsu/items/a5b15ee2aa8913b4f554)に書いたので参考にしてください。\n\n# 使い方\n\nまずシンプルに円を表示します。\n`context.scale 0.5, 0.5`しているのは、\nなぜか2倍で表示されてしまうからなんですけどなんでなんでしょう……\n\n\n```ruby\nrequire 'gtk3'\n\nwidth = 300\nheight = 300\n\nwindow = Gtk::Window.new\nwindow.set_size_request(width, height)\n\ndrawing_area = Gtk::DrawingArea.new\ndrawing_area.set_size_request(width, height)\n\ndrawing_area.signal_connect(:draw) do\n  context = drawing_area.window.create_cairo_context\n  context.scale 0.5, 0.5\n\n  # background color\n  context.set_source_rgb(0.0, 0.0, 0.0)\n  context.paint 1.0\n\n  # fill color\n  context.set_source_rgb(1.0, 1.0, 1.0)\n  # arc(x, y, r, start, end)\n  context.arc(width / 2, height / 2, 150, 0, 2 * Math::PI)\n  context.fill\nend\n\nfixed = Gtk::Fixed.new\nfixed.put(drawing_area, 0, 0)\nwindow.add(fixed)\n\nwindow.show_all\nwindow.signal_connect(:destroy) { Gtk.main_quit }\n\nGtk.main\n```\n\n![スクリーンショット 2017-12-15 3.25.09.png](https://qiita-image-store.s3.amazonaws.com/0/80816/5b3438e4-dd7c-2e1d-7132-ff7c40c82f91.png \"スクリーンショット 2017-12-15 3.25.09.png\")\n\n\n# フラクタル\n\nせっかくなんでよくある円の入れ子になったフラクタルも書きます。\n\n```ruby\nrequire 'gtk3'\n\nwidth = 300\nheight = 300\n\nwindow = Gtk::Window.new\nwindow.set_size_request(width, height)\n\ndrawing_area = Gtk::DrawingArea.new\ndrawing_area.set_size_request(width, height)\n\ndef draw_circle(context, x, y, r, c = [1.0, 1.0, 1.0, 1.0])\n  context.set_source_rgba(c)\n  context.arc(x, y, r, 0, 2 * Math::PI)\n  context.stroke\nend\n\ndef draw_fractal_circle(context, x, y, r, c = [1.0, 1.0, 1.0, 1.0], n)\n  return nil if n \u003c 0\n  draw_circle context, x, y, r, c\n  next_r = r / 2\n  x1 = x - next_r\n  draw_fractal_circle context, x1, y, next_r, c, n - 1\n  x2 = x + next_r\n  draw_fractal_circle context, x2, y, next_r, c, n - 1\nend\n\ndrawing_area.signal_connect(:draw) do\n  context = drawing_area.window.create_cairo_context\n  context.scale 0.5, 0.5\n  context.set_source_rgb(0.0, 0.0, 0.0)\n  context.paint 1.0\n\n  x = width / 2\n  y = height / 2\n  r = 150\n  red = 0.1\n  green = 0.7\n  blue = 1.0\n  alpha = 0.5\n  draw_fractal_circle context, x, y, r, [red, green, blue, alpha], 5\nend\n\nfixed = Gtk::Fixed.new\nfixed.put(drawing_area, 0, 0)\nwindow.add(fixed)\n\nwindow.show_all\nwindow.signal_connect(:destroy) { Gtk.main_quit }\n\nGtk.main\n\n```\n\n![スクリーンショット 2017-12-15 3.47.27.png](https://qiita-image-store.s3.amazonaws.com/0/80816/37f5a5d7-a9fc-2bd0-d065-f3f7c10a99b5.png \"スクリーンショット 2017-12-15 3.47.27.png\")\n\n\n# パーリンノイズ\n\nパーリンノイズを生成するGemがあったのでこれを使えば、\nノイズを使った表現もできます。\n[perlin_noise](https://github.com/junegunn/perlin_noise)\n\n```ruby\nrequire 'gtk3'\nrequire 'perlin_noise'\n\nwidth = 300\nheight = 300\n\nwindow = Gtk::Window.new\nwindow.set_size_request(width, height)\n\ndrawing_area = Gtk::DrawingArea.new\ndrawing_area.set_size_request(width, height)\n\ndef draw_circle(context, x, y, r, c = [1.0, 1.0, 1.0, 1.0])\n  context.set_source_rgba(c)\n  context.arc(x, y, r, 0, 2 * Math::PI)\n  context.fill\nend\n\nn2d = Perlin::Noise.new 2, interval: 5\ncontrast = Perlin::Curve.contrast(Perlin::Curve::CUBIC, 2)\n\ndrawing_area.signal_connect(:draw) do\n  context = drawing_area.window.create_cairo_context\n  context.scale 0.5, 0.5\n  context.set_source_rgb(0.0, 0.0, 0.0)\n  context.paint 1.0\n  0.step(width, width / 10) do |x|\n    0.step(height, height / 10) do |y|\n      n = n2d[x * 0.01, y * 0.01]\n      n = contrast.call n\n      r = (width / 10 / 2) * n\n      red = 1.0\n      green = 1.0\n      blue = 1.0\n      alpha = n\n      draw_circle context, x, y, r, [red, green, blue, alpha]\n    end\n  end\nend\n\nfixed = Gtk::Fixed.new\nfixed.put(drawing_area, 0, 0)\nwindow.add(fixed)\n\nwindow.show_all\nwindow.signal_connect(:destroy) { Gtk.main_quit }\n\nGtk.main\n```\n\n![スクリーンショット 2017-12-15 4.54.19.png](https://qiita-image-store.s3.amazonaws.com/0/80816/f1b611aa-8d88-4cd5-aaab-9f9a65fc4268.png \"スクリーンショット 2017-12-15 4.54.19.png\")\n\n# まとめ\n\nこんな感じでRubyでもクリエィティブコーディングしてみました。\n今回は静止画 + 円縛りになっちゃいました。\nこれはこれでスケッチ感覚で楽しいですが、\nインタラクションのあるものとかもやってみたいです。\n\n\n","coediting":false,"comments_count":0,"created_at":"2017-12-15T05:01:33+09:00","group":null,"id":"3656216ae77979555fa2","likes_count":0,"private":false,"reactions_count":0,"tags":[{"name":"Ruby","versions":[]},{"name":"CreativeCoding","versions":[]},{"name":"GTK3","versions":[]}],"title":"Rubyでクリエィティブコーディング","updated_at":"2017-12-15T05:01:33+09:00","url":"https://qiita.com/enkatsu/items/3656216ae77979555fa2","user":{"description":"Processing, oF, Cinder, Python, Ruby, JS","facebook_id":"","followees_count":3,"followers_count":6,"github_login_name":"endoh0509","id":"enkatsu","items_count":20,"linkedin_id":"","location":"","name":"","organization":"","permanent_id":80816,"profile_image_url":"https://qiita-image-store.s3.amazonaws.com/0/80816/profile-images/1473701912","twitter_screen_name":null,"website_url":""}},{"rendered_body":"\u003cp\u003eこの記事は\u003ca href=\"https://adventar.org/calendars/2412\" rel=\"nofollow noopener\" target=\"_blank\"\u003e創薬 Advent Calendar 2017\u003c/a\u003eの16日目の記事です。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"きっかけ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%8D%E3%81%A3%E3%81%8B%E3%81%91\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eきっかけ\u003c/h1\u003e\n\n\u003cp\u003e創薬アドカレが一つ空いていたので先輩(15日目の人)の強烈なプッシュにより記事を書くことになりました。\u003c/p\u003e\n\n\u003cp\u003e何もネタがないので昨日書いた、化学反応のエネルギーダイアグラムのプロット作成支援のプログラム(R言語)を貼ります。まだ未完成なので突っ込みどころが満載です。修正・提案あればお願いします！\u003cbr\u003e\n気が向けばそのうちパッケージ化します。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"エネルギーダイアグラム\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%A8%E3%83%8D%E3%83%AB%E3%82%AE%E3%83%BC%E3%83%80%E3%82%A4%E3%82%A2%E3%82%B0%E3%83%A9%E3%83%A0\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eエネルギーダイアグラム\u003c/h1\u003e\n\n\u003cp\u003eフォルダ名をもとにどんどんエネルギーダイアグラムをつなげていきます。\u003cbr\u003e\nこれによって、化学反応解析のレポートの作成プロセスを自動化し再現性を高くします。\u003c/p\u003e\n\n\u003cp\u003eフォルダ名のルールはこのようになっています。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003ex軸順番_状態_ラベル_メモ_反応進行前の分子(とあれば系外系中からの試薬の収支)\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cul\u003e\n\u003cli\u003e反応進行前の分子」に直前の構造のラベルを指定することでパスをつないでいきます。\u003c/li\u003e\n\u003cli\u003e反応物（開始時）の場合は「反応進行前の分子」は反応物の名前をそのまま使います。\u003c/li\u003e\n\u003cli\u003e反応試薬に関しては「反応進行前の分子」は入力なしにします。\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e\u003ca href=\"https://github.com/kyusque/ReactionProfileR/tree/temp/testfolder\" rel=\"nofollow noopener\" target=\"_blank\"\u003eサンプルフォルダ\u003c/a\u003eはこちらにあります。\u003cbr\u003e\nこのフォルダの中でRを開き、以下のプログラムを打ち込めばプロットが出ます。\u003c/p\u003e\n\n\u003cp\u003eライブラリが入っていない場合はinstall.package(\"R6\")などしてください。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"r\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003echemicalreactionprofiler.R\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\u003cspan class=\"kn\"\u003elibrary\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003eR6\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"kn\"\u003elibrary\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003etidyverse\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"kn\"\u003elibrary\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003emagrittr\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\nTotal \u003cspan class=\"o\"\u003e\u0026lt;-\u003c/span\u003e R6Class\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Total\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                 public \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"kt\"\u003elist\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n                   Ids \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"kt\"\u003elist\u003c/span\u003e\u003cspan class=\"p\"\u003e(),\u003c/span\u003e\n                   links \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"kt\"\u003ematrix\u003c/span\u003e\u003cspan class=\"p\"\u003e(),\u003c/span\u003e\n                   init \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"kr\"\u003efunction\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e self\u003cspan class=\"o\"\u003e$\u003c/span\u003eIds \u003cspan class=\"o\"\u003e\u0026lt;-\u003c/span\u003e \u003cspan class=\"kt\"\u003elist\u003c/span\u003e\u003cspan class=\"p\"\u003e(),\u003c/span\u003e\n                   add \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"kr\"\u003efunction\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003ex\u003cspan class=\"p\"\u003e){\u003c/span\u003e\n                     self\u003cspan class=\"o\"\u003e$\u003c/span\u003eIds \u003cspan class=\"o\"\u003e\u0026lt;-\u003c/span\u003e \u003cspan class=\"kt\"\u003ec\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003eself\u003cspan class=\"o\"\u003e$\u003c/span\u003eIds\u003cspan class=\"p\"\u003e,\u003c/span\u003e x\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n                   \u003cspan class=\"p\"\u003e},\u003c/span\u003e\n                   getEntryFor \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"kr\"\u003efunction\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003eid\u003cspan class=\"p\"\u003e){\u003c/span\u003e\n                     \u003cspan class=\"kr\"\u003efor\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003ex \u003cspan class=\"kr\"\u003ein\u003c/span\u003e self\u003cspan class=\"o\"\u003e$\u003c/span\u003eIds\u003cspan class=\"p\"\u003e){\u003c/span\u003e\n                       \u003cspan class=\"kr\"\u003eif\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003ex\u003cspan class=\"o\"\u003e$\u003c/span\u003eid \u003cspan class=\"o\"\u003e==\u003c/span\u003e id\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"kr\"\u003ereturn\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003ex\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n                     \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n                     \u003cspan class=\"kr\"\u003ereturn\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kc\"\u003eNULL\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n                   \u003cspan class=\"p\"\u003e},\u003c/span\u003e\n                   getTotalStrings \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"kr\"\u003efunction\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003estrings\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003elist\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"kc\"\u003eNULL\u003c/span\u003e\u003cspan class=\"p\"\u003e){\u003c/span\u003e\n                     \u003cspan class=\"kr\"\u003eif\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kp\"\u003eis.null\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003elist\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e \u003cspan class=\"kt\"\u003elist\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;-\u003c/span\u003e \u003cspan class=\"kp\"\u003estrsplit\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003estrings\u003cspan class=\"p\"\u003e,\u003c/span\u003e split \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"\\\\+|\\\\-\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)[[\u003c/span\u003e\u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e]]\u003c/span\u003e\n                     \u003cspan class=\"kr\"\u003eif\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kp\"\u003elength\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003elist\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e \u003cspan class=\"o\"\u003e||\u003c/span\u003e \u003cspan class=\"kp\"\u003eis.na\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003elist\u003c/span\u003e\u003cspan class=\"p\"\u003e)){\u003c/span\u003e\n                       \u003cspan class=\"kr\"\u003ereturn\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003estrings\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n                     \u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"kp\"\u003eelse\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                       firstInout \u003cspan class=\"o\"\u003e\u0026lt;-\u003c/span\u003e self\u003cspan class=\"o\"\u003e$\u003c/span\u003egetEntryFor\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003elist\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e])\u003c/span\u003e\u003cspan class=\"o\"\u003e$\u003c/span\u003eatomsInout\n                       \u003cspan class=\"kr\"\u003eif\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kp\"\u003eis.na\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003efirstInout\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e \u003cspan class=\"kp\"\u003elength\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003elist\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"kr\"\u003ereturn\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kp\"\u003eRecall\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003estrings\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003elist\u003c/span\u003e\u003cspan class=\"p\"\u003e()))\u003c/span\u003e\n                       \u003cspan class=\"kr\"\u003eif\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003efirstInout \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"kt\"\u003elist\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e \u003cspan class=\"kp\"\u003elength\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003elist\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"kr\"\u003ereturn\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kp\"\u003eRecall\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003estrings\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003elist\u003c/span\u003e\u003cspan class=\"p\"\u003e()))\u003c/span\u003e\n                       \u003cspan class=\"kr\"\u003eif\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003efirstInout \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"kt\"\u003elist\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"o\"\u003e||\u003c/span\u003e \u003cspan class=\"kp\"\u003eis.na\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003efirstInout\u003cspan class=\"p\"\u003e))\u003c/span\u003e \u003cspan class=\"kr\"\u003ereturn\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kp\"\u003eRecall\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003estrings\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003elist\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"m\"\u003e-1\u003c/span\u003e\u003cspan class=\"p\"\u003e]))\u003c/span\u003e\n                       strings \u003cspan class=\"o\"\u003e\u0026lt;-\u003c/span\u003e \u003cspan class=\"kp\"\u003egsub\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003elist\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e],\u003c/span\u003e firstInout\u003cspan class=\"p\"\u003e,\u003c/span\u003e strings\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n                       \u003cspan class=\"kt\"\u003elist\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;-\u003c/span\u003e \u003cspan class=\"kt\"\u003ec\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kp\"\u003estrsplit\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003efirstInout\u003cspan class=\"p\"\u003e,\u003c/span\u003e split \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"\\\\+|\\\\-\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)[[\u003c/span\u003e\u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e]],\u003c/span\u003e \u003cspan class=\"kt\"\u003elist\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"m\"\u003e-1\u003c/span\u003e\u003cspan class=\"p\"\u003e])\u003c/span\u003e\n                       \u003cspan class=\"kr\"\u003ereturn\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kp\"\u003eRecall\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003estrings\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003elist\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n                     \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n                   \u003cspan class=\"p\"\u003e},\u003c/span\u003e\n                   fixEnergy \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"kr\"\u003efunction\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003estartId\u003cspan class=\"p\"\u003e){\u003c/span\u003e\n                     \u003cspan class=\"kr\"\u003efor\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003ex \u003cspan class=\"kr\"\u003ein\u003c/span\u003e self\u003cspan class=\"o\"\u003e$\u003c/span\u003eIds\u003cspan class=\"p\"\u003e){\u003c/span\u003e\n                       strings \u003cspan class=\"o\"\u003e\u0026lt;-\u003c/span\u003e self\u003cspan class=\"o\"\u003e$\u003c/span\u003egetTotalStrings\u003cspan class=\"p\"\u003e(\u003c/span\u003ex\u003cspan class=\"o\"\u003e$\u003c/span\u003eatomsInout\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n                       \u003cspan class=\"kr\"\u003eif\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kp\"\u003eis.na\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003estrings\u003cspan class=\"p\"\u003e)){\u003c/span\u003e\n                         srtings \u003cspan class=\"o\"\u003e\u0026lt;-\u003c/span\u003e \u003cspan class=\"s\"\u003e\"0\"\u003c/span\u003e\n                       \u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"kr\"\u003eelse\u003c/span\u003e \u003cspan class=\"kr\"\u003eif\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003estrings \u003cspan class=\"o\"\u003e==\u003c/span\u003e x\u003cspan class=\"o\"\u003e$\u003c/span\u003eid\u003cspan class=\"p\"\u003e){\u003c/span\u003e\u003cspan class=\"c1\"\u003e#一番最初の場合\u003c/span\u003e\n                         strings \u003cspan class=\"o\"\u003e\u0026lt;-\u003c/span\u003e \u003cspan class=\"kp\"\u003epaste0\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"as.numeric(self$getEntryFor(\\\"\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003estrings\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\\\")$energy) * 2\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n                       \u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"kp\"\u003eelse\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                         strings \u003cspan class=\"o\"\u003e\u0026lt;-\u003c/span\u003e \u003cspan class=\"kp\"\u003epaste0\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003ex\u003cspan class=\"o\"\u003e$\u003c/span\u003eid\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"s\"\u003e\"-\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003estrings\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n                         \u003cspan class=\"kr\"\u003efor\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003estr \u003cspan class=\"kr\"\u003ein\u003c/span\u003e \u003cspan class=\"kp\"\u003eunique\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kp\"\u003estrsplit\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003estrings\u003cspan class=\"p\"\u003e,\u003c/span\u003e split \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"\\\\+|\\\\-\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)[[\u003c/span\u003e\u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e]])){\u003c/span\u003e\n                           \u003cspan class=\"kr\"\u003eif\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003estr \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"s\"\u003e\"NA\"\u003c/span\u003e\u003cspan class=\"p\"\u003e){\u003c/span\u003e\n                             strings \u003cspan class=\"o\"\u003e\u0026lt;-\u003c/span\u003e \u003cspan class=\"kp\"\u003egsub\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"NA\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\"0\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e strings\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n                           \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n                           \u003cspan class=\"kr\"\u003eelse\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                             strings \u003cspan class=\"o\"\u003e\u0026lt;-\u003c/span\u003e \u003cspan class=\"kp\"\u003egsub\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003estr\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kp\"\u003epaste0\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"as.numeric(self$getEntryFor(\\\"\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003estr\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\\\")$energy)\"\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e strings\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"c1\"\u003e#エネルギーが取れなかったときの例外処理考える\u003c/span\u003e\n                           \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n                         \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n                       \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n                       strings \u003cspan class=\"o\"\u003e\u0026lt;-\u003c/span\u003e \u003cspan class=\"kp\"\u003egsub\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\\\\+\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\"=\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e strings\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n                       strings \u003cspan class=\"o\"\u003e\u0026lt;-\u003c/span\u003e \u003cspan class=\"kp\"\u003egsub\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\\\\-\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\"\\\\+\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e strings\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n                       strings \u003cspan class=\"o\"\u003e\u0026lt;-\u003c/span\u003e \u003cspan class=\"kp\"\u003egsub\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"=\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\"\\\\-\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e strings\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n                       x\u003cspan class=\"o\"\u003e$\u003c/span\u003efixedEnergy \u003cspan class=\"o\"\u003e\u0026lt;-\u003c/span\u003e \u003cspan class=\"kp\"\u003eeval\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kp\"\u003eparse\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003etext \u003cspan class=\"o\"\u003e=\u003c/span\u003e strings\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n                     \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n                     base \u003cspan class=\"o\"\u003e\u0026lt;-\u003c/span\u003e \u003cspan class=\"kp\"\u003eas.numeric\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003eself\u003cspan class=\"o\"\u003e$\u003c/span\u003egetEntryFor\u003cspan class=\"p\"\u003e(\u003c/span\u003estartId\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"o\"\u003e$\u003c/span\u003efixedEnergy\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n                     \u003cspan class=\"kr\"\u003efor\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003ex \u003cspan class=\"kr\"\u003ein\u003c/span\u003e self\u003cspan class=\"o\"\u003e$\u003c/span\u003eIds\u003cspan class=\"p\"\u003e){\u003c/span\u003e\n                       x\u003cspan class=\"o\"\u003e$\u003c/span\u003efixedEnergy \u003cspan class=\"o\"\u003e\u0026lt;-\u003c/span\u003e x\u003cspan class=\"o\"\u003e$\u003c/span\u003efixedEnergy \u003cspan class=\"o\"\u003e-\u003c/span\u003e base\n                     \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n                   \u003cspan class=\"p\"\u003e},\u003c/span\u003e\n                   getLinks \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"kr\"\u003efunction\u003c/span\u003e\u003cspan class=\"p\"\u003e(){\u003c/span\u003e\n                     mat \u003cspan class=\"o\"\u003e\u0026lt;-\u003c/span\u003e self\u003cspan class=\"o\"\u003e$\u003c/span\u003eIds \u003cspan class=\"o\"\u003e%\u0026gt;%\u003c/span\u003e\n                       \u003cspan class=\"kp\"\u003elapply\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kr\"\u003efunction\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003ex\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"kt\"\u003ec\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003ex\u003cspan class=\"o\"\u003e$\u003c/span\u003eid\u003cspan class=\"p\"\u003e,\u003c/span\u003e x\u003cspan class=\"o\"\u003e$\u003c/span\u003elinkId\u003cspan class=\"p\"\u003e))\u003c/span\u003e \u003cspan class=\"o\"\u003e%\u0026gt;%\u003c/span\u003e\n                       \u003cspan class=\"kp\"\u003edo.call\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kp\"\u003erbind\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"m\"\u003e.\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n                     mat \u003cspan class=\"o\"\u003e\u0026lt;-\u003c/span\u003e mat\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"o\"\u003e!\u003c/span\u003e\u003cspan class=\"kp\"\u003eis.na\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003emat\u003cspan class=\"p\"\u003e[,\u003c/span\u003e\u003cspan class=\"m\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e]),]\u003c/span\u003e\n                     mat \u003cspan class=\"o\"\u003e\u0026lt;-\u003c/span\u003e mat\u003cspan class=\"p\"\u003e[\u003c/span\u003emat\u003cspan class=\"p\"\u003e[,\u003c/span\u003e\u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\u003cspan class=\"o\"\u003e!=\u003c/span\u003emat\u003cspan class=\"p\"\u003e[,\u003c/span\u003e\u003cspan class=\"m\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e],]\u003c/span\u003e\n                     self\u003cspan class=\"o\"\u003e$\u003c/span\u003elinks \u003cspan class=\"o\"\u003e\u0026lt;-\u003c/span\u003e mat\u003cspan class=\"p\"\u003e[,\u003c/span\u003e\u003cspan class=\"kt\"\u003ec\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e)]\u003c/span\u003e\n                   \u003cspan class=\"p\"\u003e},\u003c/span\u003e\n                   plot \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"kr\"\u003efunction\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003elabelpos \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e){\u003c/span\u003e\n                     \u003cspan class=\"kr\"\u003eif\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kp\"\u003eis.na\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003eself\u003cspan class=\"o\"\u003e$\u003c/span\u003elinks\u003cspan class=\"p\"\u003e))\u003c/span\u003e self\u003cspan class=\"o\"\u003e$\u003c/span\u003egetLinks\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"c1\"\u003e#この辺どうやって場合分けするのだろうか\u003c/span\u003e\n                     seq \u003cspan class=\"o\"\u003e\u0026lt;-\u003c/span\u003e self\u003cspan class=\"o\"\u003e$\u003c/span\u003elinks \u003cspan class=\"o\"\u003e%\u0026gt;%\u003c/span\u003e \u003cspan class=\"kp\"\u003eas.vector\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e%\u0026gt;%\u003c/span\u003e \u003cspan class=\"kp\"\u003eunique\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n                     seq \u003cspan class=\"o\"\u003e%\u0026lt;\u0026gt;%\u003c/span\u003e \u003cspan class=\"m\"\u003e.\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"kp\"\u003eorder\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e.\u003c/span\u003e\u003cspan class=\"p\"\u003e)]\u003c/span\u003e\n                     kv \u003cspan class=\"o\"\u003e\u0026lt;-\u003c/span\u003e seq \u003cspan class=\"o\"\u003e%\u0026gt;%\u003c/span\u003e \u003cspan class=\"kp\"\u003esapply\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kr\"\u003efunction\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003ex\u003cspan class=\"p\"\u003e)\u003c/span\u003e self\u003cspan class=\"o\"\u003e$\u003c/span\u003egetEntryFor\u003cspan class=\"p\"\u003e(\u003c/span\u003ex\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"o\"\u003e$\u003c/span\u003efixedEnergy\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n                     gp \u003cspan class=\"o\"\u003e\u0026lt;-\u003c/span\u003e ggplot\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n                     gp \u003cspan class=\"o\"\u003e=\u003c/span\u003e gp \u003cspan class=\"o\"\u003e+\u003c/span\u003e ylim\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kp\"\u003emin\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003ekv\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u003c/span\u003e \u003cspan class=\"kp\"\u003eabs\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003elabelpos\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"kp\"\u003emax\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003ekv\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"kp\"\u003eabs\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003elabelpos\u003cspan class=\"p\"\u003e))\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e xlim\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"kp\"\u003elength\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kp\"\u003eseq\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"m\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n                     \u003cspan class=\"kr\"\u003efor\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003ei \u003cspan class=\"kr\"\u003ein\u003c/span\u003e \u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"o\"\u003e:\u003c/span\u003e\u003cspan class=\"kp\"\u003elength\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kp\"\u003eseq\u003c/span\u003e\u003cspan class=\"p\"\u003e)){\u003c/span\u003e\n                       \u003cspan class=\"kp\"\u003eeval\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kp\"\u003eparse\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003etext \u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"c1\"\u003e#こうしないとうまくいかない。分からない。\u003c/span\u003e\n                                    \u003cspan class=\"kp\"\u003epaste0\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"gp \u0026lt;- gp + geom_segment(aes(x = \"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                                           \u003cspan class=\"m\"\u003e2\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003ei \u003cspan class=\"m\"\u003e-2\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                                           \u003cspan class=\"s\"\u003e\" , y=\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                                           kv\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"kp\"\u003eseq\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003ei\u003cspan class=\"p\"\u003e]],\u003c/span\u003e\n                                           \u003cspan class=\"s\"\u003e\", xend = \"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                                           \u003cspan class=\"m\"\u003e2\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003ei \u003cspan class=\"m\"\u003e-1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                                           \u003cspan class=\"s\"\u003e\", yend=\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                                           kv\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"kp\"\u003eseq\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003ei\u003cspan class=\"p\"\u003e]],\u003c/span\u003e\n                                           \u003cspan class=\"s\"\u003e\"))\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)))\u003c/span\u003e\n                     \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n                     \u003cspan class=\"kr\"\u003efor\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003ei \u003cspan class=\"kr\"\u003ein\u003c/span\u003e \u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"o\"\u003e:\u003c/span\u003e\u003cspan class=\"kp\"\u003elength\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kp\"\u003eseq\u003c/span\u003e\u003cspan class=\"p\"\u003e)){\u003c/span\u003e\n                       \u003cspan class=\"kp\"\u003eeval\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kp\"\u003eparse\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003etext \u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"c1\"\u003e#こうしないとうまくいかない。分からない。\u003c/span\u003e\n                                    \u003cspan class=\"kp\"\u003epaste0\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"gp \u0026lt;- gp + geom_segment(aes(x = \"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                                           \u003cspan class=\"m\"\u003e2\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003ei \u003cspan class=\"m\"\u003e-2\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                                           \u003cspan class=\"s\"\u003e\" , y=\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                                           kv\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"kp\"\u003eseq\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003ei\u003cspan class=\"p\"\u003e]],\u003c/span\u003e\n                                           \u003cspan class=\"s\"\u003e\", xend = \"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                                           \u003cspan class=\"m\"\u003e2\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003ei \u003cspan class=\"m\"\u003e-1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                                           \u003cspan class=\"s\"\u003e\", yend=\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                                           kv\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"kp\"\u003eseq\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003ei\u003cspan class=\"p\"\u003e]],\u003c/span\u003e\n                                           \u003cspan class=\"s\"\u003e\"))\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)))\u003c/span\u003e\n                       \u003cspan class=\"kp\"\u003eeval\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kp\"\u003eparse\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003etext \u003cspan class=\"o\"\u003e=\u003c/span\u003e\n                                    \u003cspan class=\"kp\"\u003epaste0\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"gp \u0026lt;- gp + geom_text(aes(x = \"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                                           \u003cspan class=\"m\"\u003e2\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003ei \u003cspan class=\"m\"\u003e-1.5\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                                           \u003cspan class=\"s\"\u003e\" , y=\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                                           kv\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"kp\"\u003eseq\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003ei\u003cspan class=\"p\"\u003e]]\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e labelpos\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                                           \u003cspan class=\"s\"\u003e\",label=\\\"\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                                           self\u003cspan class=\"o\"\u003e$\u003c/span\u003egetEntryFor\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kp\"\u003eseq\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003ei\u003cspan class=\"p\"\u003e])\u003c/span\u003e\u003cspan class=\"o\"\u003e$\u003c/span\u003elabel\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                                           \u003cspan class=\"s\"\u003e\"\\\"))\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)))\u003c/span\u003e\n                     \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n                     \u003cspan class=\"kr\"\u003efor\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003ei \u003cspan class=\"kr\"\u003ein\u003c/span\u003e \u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"o\"\u003e:\u003c/span\u003e\u003cspan class=\"kp\"\u003elength\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003eself\u003cspan class=\"o\"\u003e$\u003c/span\u003elinks\u003cspan class=\"p\"\u003e[,\u003c/span\u003e\u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e])){\u003c/span\u003e\n                       \u003cspan class=\"kp\"\u003eeval\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kp\"\u003eparse\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003etext \u003cspan class=\"o\"\u003e=\u003c/span\u003e\n                                    \u003cspan class=\"kp\"\u003epaste0\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"gp \u0026lt;- gp + geom_segment(aes(x = \"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                                           \u003cspan class=\"m\"\u003e2\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"o\"\u003e:\u003c/span\u003e\u003cspan class=\"kp\"\u003elength\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kp\"\u003eseq\u003c/span\u003e\u003cspan class=\"p\"\u003e))[\u003c/span\u003eseq\u003cspan class=\"o\"\u003e==\u003c/span\u003eself\u003cspan class=\"o\"\u003e$\u003c/span\u003elinks\u003cspan class=\"p\"\u003e[\u003c/span\u003ei\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e]]\u003c/span\u003e \u003cspan class=\"m\"\u003e-1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                                           \u003cspan class=\"s\"\u003e\" , y=\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003ekv\u003cspan class=\"p\"\u003e[\u003c/span\u003eself\u003cspan class=\"o\"\u003e$\u003c/span\u003elinks\u003cspan class=\"p\"\u003e[\u003c/span\u003ei\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e]],\u003c/span\u003e\n                                           \u003cspan class=\"s\"\u003e\", xend = \"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                                           \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"o\"\u003e:\u003c/span\u003e\u003cspan class=\"kp\"\u003elength\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kp\"\u003eseq\u003c/span\u003e\u003cspan class=\"p\"\u003e))[\u003c/span\u003eseq\u003cspan class=\"o\"\u003e==\u003c/span\u003eself\u003cspan class=\"o\"\u003e$\u003c/span\u003elinks\u003cspan class=\"p\"\u003e[\u003c/span\u003ei\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"m\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e]]\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"m\"\u003e2\u003c/span\u003e \u003cspan class=\"m\"\u003e-2\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                                           \u003cspan class=\"s\"\u003e\", yend=\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                                           kv\u003cspan class=\"p\"\u003e[\u003c/span\u003eself\u003cspan class=\"o\"\u003e$\u003c/span\u003elinks\u003cspan class=\"p\"\u003e[\u003c/span\u003ei\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"m\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e]],\u003c/span\u003e\n                                           \u003cspan class=\"s\"\u003e\"))\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)))\u003c/span\u003e\n                     \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n                     title \u003cspan class=\"o\"\u003e\u0026lt;-\u003c/span\u003e \u003cspan class=\"kp\"\u003egetwd\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e%\u0026gt;%\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"kr\"\u003efunction\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003ex\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"kp\"\u003erev\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kp\"\u003estrsplit\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003ex\u003cspan class=\"p\"\u003e,\u003c/span\u003esplit \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"/\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)[[\u003c/span\u003e\u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e]])[\u003c/span\u003e\u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e]}()\u003c/span\u003e\n                     gp \u003cspan class=\"o\"\u003e\u0026lt;-\u003c/span\u003e gp \u003cspan class=\"o\"\u003e+\u003c/span\u003e labs\u003cspan class=\"p\"\u003e(\u003c/span\u003etitle \u003cspan class=\"o\"\u003e=\u003c/span\u003e title\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e xlab\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e ylab\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n                     gp\n                   \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n                 \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\nIdenticalEntry \u003cspan class=\"o\"\u003e\u0026lt;-\u003c/span\u003e R6Class\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"IdenticalEntry\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                          public \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"kt\"\u003elist\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n                            initialize \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"kr\"\u003efunction\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003epath\u003cspan class=\"p\"\u003e,\u003c/span\u003e parser \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"kc\"\u003eNULL\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e energy \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"kc\"\u003eNULL\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e pointGroup \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"kc\"\u003eNULL\u003c/span\u003e\u003cspan class=\"p\"\u003e){\u003c/span\u003e\n                              self\u003cspan class=\"o\"\u003e$\u003c/span\u003epath \u003cspan class=\"o\"\u003e\u0026lt;-\u003c/span\u003e path\n                              self\u003cspan class=\"o\"\u003e$\u003c/span\u003eenergy \u003cspan class=\"o\"\u003e\u0026lt;-\u003c/span\u003e energy\n                              self\u003cspan class=\"o\"\u003e$\u003c/span\u003epointGroup \u003cspan class=\"o\"\u003e\u0026lt;-\u003c/span\u003e pointGroup\n                              \u003cspan class=\"kr\"\u003eif\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"o\"\u003e!\u003c/span\u003e\u003cspan class=\"kp\"\u003eis.null\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003eparser\u003cspan class=\"p\"\u003e)){\u003c/span\u003e\n                                res \u003cspan class=\"o\"\u003e\u0026lt;-\u003c/span\u003e self\u003cspan class=\"o\"\u003e$\u003c/span\u003eparseInfoFromPath\u003cspan class=\"p\"\u003e(\u003c/span\u003eparser\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n                                self\u003cspan class=\"o\"\u003e$\u003c/span\u003eid \u003cspan class=\"o\"\u003e\u0026lt;-\u003c/span\u003e res\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n                                self\u003cspan class=\"o\"\u003e$\u003c/span\u003etitle \u003cspan class=\"o\"\u003e\u0026lt;-\u003c/span\u003e res\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"m\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n                                self\u003cspan class=\"o\"\u003e$\u003c/span\u003eatomsInout \u003cspan class=\"o\"\u003e\u0026lt;-\u003c/span\u003e res\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"m\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n                                self\u003cspan class=\"o\"\u003e$\u003c/span\u003elinkId \u003cspan class=\"o\"\u003e\u0026lt;-\u003c/span\u003e \u003cspan class=\"kp\"\u003estrsplit\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003eself\u003cspan class=\"o\"\u003e$\u003c/span\u003eatomsInout\u003cspan class=\"p\"\u003e,\u003c/span\u003esplit \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"\\\\+|\\\\-\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)[[\u003c/span\u003e\u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e]][\u003c/span\u003e\u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n                                label \u003cspan class=\"o\"\u003e\u0026lt;-\u003c/span\u003e \u003cspan class=\"kp\"\u003estrsplit\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003eself\u003cspan class=\"o\"\u003e$\u003c/span\u003eid\u003cspan class=\"p\"\u003e,\u003c/span\u003esplit \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"EQ|TS\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)[[\u003c/span\u003e\u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e]][\u003c/span\u003e\u003cspan class=\"m\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n                                self\u003cspan class=\"o\"\u003e$\u003c/span\u003elabel \u003cspan class=\"o\"\u003e\u0026lt;-\u003c/span\u003e \u003cspan class=\"kp\"\u003eifelse\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kp\"\u003eis.na\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003elabel\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"s\"\u003e\"\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003elabel\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n                              \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n                            \u003cspan class=\"p\"\u003e},\u003c/span\u003e\n                            parseInfoFromPath \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"kr\"\u003efunction\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003eparser\u003cspan class=\"p\"\u003e){\u003c/span\u003e\n                              parser\u003cspan class=\"p\"\u003e(\u003c/span\u003eself\u003cspan class=\"o\"\u003e$\u003c/span\u003epath\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"c1\"\u003e#parserはidとtitleとinoutのベクター\u003c/span\u003e\n                            \u003cspan class=\"p\"\u003e},\u003c/span\u003e\n                            parseEnergyFromPath \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"kr\"\u003efunction\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003eparser\u003cspan class=\"p\"\u003e){\u003c/span\u003e\n                              self\u003cspan class=\"o\"\u003e$\u003c/span\u003eenergy \u003cspan class=\"o\"\u003e\u0026lt;-\u003c/span\u003e parser\u003cspan class=\"p\"\u003e(\u003c/span\u003eself\u003cspan class=\"o\"\u003e$\u003c/span\u003epath\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n                            \u003cspan class=\"p\"\u003e},\u003c/span\u003e\n                            parsepointGroupFromPath \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"kr\"\u003efunction\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003eparser\u003cspan class=\"p\"\u003e){\u003c/span\u003e\n                              self\u003cspan class=\"o\"\u003e$\u003c/span\u003epointGroup \u003cspan class=\"o\"\u003e\u0026lt;-\u003c/span\u003e parser\u003cspan class=\"p\"\u003e(\u003c/span\u003eself\u003cspan class=\"o\"\u003e$\u003c/span\u003epath\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n                            \u003cspan class=\"p\"\u003e},\u003c/span\u003e\n                            path \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"kt\"\u003echaracter\u003c/span\u003e\u003cspan class=\"p\"\u003e(),\u003c/span\u003e\n                            id \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"kt\"\u003echaracter\u003c/span\u003e\u003cspan class=\"p\"\u003e(),\u003c/span\u003e\n                            title \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"kt\"\u003echaracter\u003c/span\u003e\u003cspan class=\"p\"\u003e(),\u003c/span\u003e\n                            atomsInout \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"kt\"\u003echaracter\u003c/span\u003e\u003cspan class=\"p\"\u003e(),\u003c/span\u003e\n                            energy \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"kt\"\u003enumeric\u003c/span\u003e\u003cspan class=\"p\"\u003e(),\u003c/span\u003e\n                            fixedEnergy \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"kt\"\u003enumeric\u003c/span\u003e\u003cspan class=\"p\"\u003e(),\u003c/span\u003e\n                            pointGroup \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"kt\"\u003echaracter\u003c/span\u003e\u003cspan class=\"p\"\u003e(),\u003c/span\u003e\n                            linkId \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"kt\"\u003echaracter\u003c/span\u003e\u003cspan class=\"p\"\u003e(),\u003c/span\u003e\n                            label \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"kt\"\u003echaracter\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n                          \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\ndirNameParser \u003cspan class=\"o\"\u003e\u0026lt;-\u003c/span\u003e \u003cspan class=\"kr\"\u003efunction\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003edirpath\u003cspan class=\"p\"\u003e){\u003c/span\u003e\n  dirpath \u003cspan class=\"o\"\u003e%\u0026gt;%\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"kr\"\u003efunction\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003ex\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"kp\"\u003estrsplit\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003ex\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"s\"\u003e\"_\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)[[\u003c/span\u003e\u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e]]}()\u003c/span\u003e \u003cspan class=\"o\"\u003e%\u0026gt;%\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"kr\"\u003efunction\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003ex\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"kt\"\u003ec\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kp\"\u003epaste0\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003ex\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"o\"\u003e:\u003c/span\u003e\u003cspan class=\"m\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e],\u003c/span\u003ecollapse \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"\"\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003ex\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"m\"\u003e4\u003c/span\u003e\u003cspan class=\"p\"\u003e],\u003c/span\u003ex\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"m\"\u003e5\u003c/span\u003e\u003cspan class=\"p\"\u003e])}()\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"r\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003emain.R\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e\ngetEnergy \u003cspan class=\"o\"\u003e\u0026lt;-\u003c/span\u003e \u003cspan class=\"kr\"\u003efunction\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003edirpath\u003cspan class=\"p\"\u003e){\u003c/span\u003e\n  dirpath \u003cspan class=\"o\"\u003e%\u0026gt;%\u003c/span\u003e\n    \u003cspan class=\"kp\"\u003epaste0\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"/file\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e%\u0026gt;%\u003c/span\u003e\n    read_lines \u003cspan class=\"o\"\u003e%\u0026gt;%\u003c/span\u003e\n    \u003cspan class=\"kp\"\u003eas.numeric\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\na\u003cspan class=\"o\"\u003e\u0026lt;-\u003c/span\u003eTotal\u003cspan class=\"o\"\u003e$\u003c/span\u003enew\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003cspan class=\"kp\"\u003edir\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\".\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e%\u0026gt;%\u003c/span\u003e\n  \u003cspan class=\"kp\"\u003elapply\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kr\"\u003efunction\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003ex\u003cspan class=\"p\"\u003e)\u003c/span\u003e a\u003cspan class=\"o\"\u003e$\u003c/span\u003eadd\u003cspan class=\"p\"\u003e(\u003c/span\u003eIdenticalEntry\u003cspan class=\"o\"\u003e$\u003c/span\u003enew\u003cspan class=\"p\"\u003e(\u003c/span\u003ex\u003cspan class=\"p\"\u003e,\u003c/span\u003e dirNameParser\u003cspan class=\"p\"\u003e,\u003c/span\u003e getEnergy\u003cspan class=\"p\"\u003e(\u003c/span\u003ex\u003cspan class=\"p\"\u003e))))\u003c/span\u003e \u003cspan class=\"c1\"\u003e#ここのgetEnergy関数は自由に置き換え可能なので、gaussianやgamessのログから直接データをとりたしたいときなど、適宜関数を書き換えてください。\u003c/span\u003e\na\u003cspan class=\"o\"\u003e$\u003c/span\u003efixEnergy\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"10EQ1\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\na\u003cspan class=\"o\"\u003e$\u003c/span\u003eplot\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\na\u003cspan class=\"o\"\u003e$\u003c/span\u003elinks\na\u003cspan class=\"o\"\u003e$\u003c/span\u003elinks \u003cspan class=\"o\"\u003e%\u0026lt;\u0026gt;%\u003c/span\u003e \u003cspan class=\"kp\"\u003erbind\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003ec\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"33TS\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\"90EQ4\"\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\na\u003cspan class=\"o\"\u003e$\u003c/span\u003eplot\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e-1\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/06275342a37479ac4895bab6bb826b88b36c6ecd/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3135383336382f30333662383431382d626163632d616234632d326636642d3363666331333564396462312e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://camo.qiitausercontent.com/06275342a37479ac4895bab6bb826b88b36c6ecd/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3135383336382f30333662383431382d626163632d616234632d326636642d3363666331333564396462312e706e67\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/158368/036b8418-bacc-ab4c-2f6d-3cfc135d9db1.png\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eはい出来ました！\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"補足エネルギーダイアグラムは何が嬉しいのか\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%A3%9C%E8%B6%B3%E3%82%A8%E3%83%8D%E3%83%AB%E3%82%AE%E3%83%BC%E3%83%80%E3%82%A4%E3%82%A2%E3%82%B0%E3%83%A9%E3%83%A0%E3%81%AF%E4%BD%95%E3%81%8C%E5%AC%89%E3%81%97%E3%81%84%E3%81%AE%E3%81%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e補足　エネルギーダイアグラムは何が嬉しいのか\u003c/h1\u003e\n\n\u003cp\u003e化学合成において最適化すべき場所が分かります。\u003c/p\u003e\n\n\u003cp\u003e化学合成において、最終的に同じ物質が出来る場合でも複数の経路が考えられます。\u003cbr\u003e\nこういうときに、エネルギーダイアグラムをつくってあげると、どちらの経路が重要な反応であるかが理解できます。\u003cbr\u003e\n今回の例だと、図でいう赤の経路の方が青の経路よりもエネルギーの高低差（活性化エネルギー）が小さく、反応において主要な経路であるといえます。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/d802b0e69f15d4a31340ec564c8c29ed046844b7/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3135383336382f30353966623638332d313038382d333039632d633866322d3333396633376534353436652e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://camo.qiitausercontent.com/d802b0e69f15d4a31340ec564c8c29ed046844b7/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3135383336382f30353966623638332d313038382d333039632d633866322d3333396633376534353436652e706e67\" alt=\"kagakuhannnou.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/158368/059fb683-1088-309c-c8f2-339f37e4546e.png\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eそのため合成を最適化し収率などを高めたい場合、赤の経路の最適化を行えばよいことが分かります。\u003cbr\u003e\n逆に青の経路は主要な経路ではないので、いくら最適化しても収率などに変化はないと考えられ、時間や資金の無駄になります。\u003c/p\u003e\n\n\u003cp\u003eそういった実験計画の判断基準をエネルギーダイアグラムは与えてくれ、リソースの無駄な消費を抑えることができます。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"参考\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%8F%82%E8%80%83\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e参考\u003c/h1\u003e\n\n\u003cp\u003eエネルギーダイアグラム作成時の計算手順\u003cbr\u003e\n\u003ca href=\"http://xn--qck0d2a9as2853cudbqy0lc6cfz4a0e7e.xyz/theory/how-to-write-ezu\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://xn--qck0d2a9as2853cudbqy0lc6cfz4a0e7e.xyz/theory/how-to-write-ezu\u003c/a\u003e\u003cbr\u003e\n似たようなことをされてる方\u003cbr\u003e\n\u003ca href=\"http://pc-chem-basics.blog.jp/archives/2454069.html\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://pc-chem-basics.blog.jp/archives/2454069.html\u003c/a\u003e\u003c/p\u003e\n","body":"\nこの記事は[創薬 Advent Calendar 2017](https://adventar.org/calendars/2412)の16日目の記事です。\n\n#きっかけ\n創薬アドカレが一つ空いていたので先輩(15日目の人)の強烈なプッシュにより記事を書くことになりました。\n\n何もネタがないので昨日書いた、化学反応のエネルギーダイアグラムのプロット作成支援のプログラム(R言語)を貼ります。まだ未完成なので突っ込みどころが満載です。修正・提案あればお願いします！\n気が向けばそのうちパッケージ化します。\n\n#エネルギーダイアグラム\nフォルダ名をもとにどんどんエネルギーダイアグラムをつなげていきます。\nこれによって、化学反応解析のレポートの作成プロセスを自動化し再現性を高くします。\n\nフォルダ名のルールはこのようになっています。\n\n```\nx軸順番_状態_ラベル_メモ_反応進行前の分子(とあれば系外系中からの試薬の収支)\n```\n- 反応進行前の分子」に直前の構造のラベルを指定することでパスをつないでいきます。\n- 反応物（開始時）の場合は「反応進行前の分子」は反応物の名前をそのまま使います。\n- 反応試薬に関しては「反応進行前の分子」は入力なしにします。\n\n[サンプルフォルダ](https://github.com/kyusque/ReactionProfileR/tree/temp/testfolder)はこちらにあります。\nこのフォルダの中でRを開き、以下のプログラムを打ち込めばプロットが出ます。\n\nライブラリが入っていない場合はinstall.package(\"R6\")などしてください。\n\n```r:chemicalreactionprofiler.R\nlibrary(R6)\nlibrary(tidyverse)\nlibrary(magrittr)\n\nTotal \u003c- R6Class(\"Total\",\n                 public = list(\n                   Ids = list(),\n                   links = matrix(),\n                   init = function() self$Ids \u003c- list(),\n                   add = function(x){\n                     self$Ids \u003c- c(self$Ids, x)\n                   },\n                   getEntryFor = function(id){\n                     for(x in self$Ids){\n                       if(x$id == id) return(x)\n                     }\n                     return(NULL)\n                   },\n                   getTotalStrings = function(strings, list = NULL){\n                     if(is.null(list)) list \u003c- strsplit(strings, split = \"\\\\+|\\\\-\")[[1]]\n                     if(length(list) == 0 || is.na(list)){\n                       return(strings)\n                     }else{\n                       firstInout \u003c- self$getEntryFor(list[1])$atomsInout\n                       if(is.na(firstInout) \u0026\u0026 length(list) == 1) return(Recall(strings, list()))\n                       if(firstInout == list[1] \u0026\u0026 length(list) == 1) return(Recall(strings, list()))\n                       if(firstInout == list[1] || is.na(firstInout)) return(Recall(strings, list[-1]))\n                       strings \u003c- gsub(list[1], firstInout, strings)\n                       list \u003c- c(strsplit(firstInout, split = \"\\\\+|\\\\-\")[[1]], list[-1])\n                       return(Recall(strings, list))\n                     }\n\n                   },\n                   fixEnergy = function(startId){\n                     for(x in self$Ids){\n                       strings \u003c- self$getTotalStrings(x$atomsInout)\n                       if(is.na(strings)){\n                         srtings \u003c- \"0\"\n                       }else if(strings == x$id){#一番最初の場合\n                         strings \u003c- paste0(\"as.numeric(self$getEntryFor(\\\"\",strings,\"\\\")$energy) * 2\")\n                       }else{\n                         strings \u003c- paste0(x$id,\"-\",strings)\n                         for(str in unique(strsplit(strings, split = \"\\\\+|\\\\-\")[[1]])){\n                           if(str == \"NA\"){\n                             strings \u003c- gsub(\"NA\", \"0\", strings)\n                           }\n                           else {\n                             strings \u003c- gsub(str, paste0(\"as.numeric(self$getEntryFor(\\\"\",str,\"\\\")$energy)\"), strings)#エネルギーが取れなかったときの例外処理考える\n                           }\n                         }\n\n                       }\n                       strings \u003c- gsub(\"\\\\+\", \"=\", strings)\n                       strings \u003c- gsub(\"\\\\-\", \"\\\\+\", strings)\n                       strings \u003c- gsub(\"=\", \"\\\\-\", strings)\n                       x$fixedEnergy \u003c- eval(parse(text = strings))\n                     }\n                     base \u003c- as.numeric(self$getEntryFor(startId)$fixedEnergy)\n                     for(x in self$Ids){\n                       x$fixedEnergy \u003c- x$fixedEnergy - base\n                     }\n                   },\n                   getLinks = function(){\n                     mat \u003c- self$Ids %\u003e%\n                       lapply(function(x) c(x$id, x$linkId)) %\u003e%\n                       do.call(rbind,.)\n                     mat \u003c- mat[!is.na(mat[,2]),]\n                     mat \u003c- mat[mat[,1]!=mat[,2],]\n                     self$links \u003c- mat[,c(2,1)]\n                   },\n                   plot = function(labelpos = 0){\n                     if(is.na(self$links)) self$getLinks() #この辺どうやって場合分けするのだろうか\n                     seq \u003c- self$links %\u003e% as.vector() %\u003e% unique()\n                     seq %\u003c\u003e% .[order(.)]\n                     kv \u003c- seq %\u003e% sapply(function(x) self$getEntryFor(x)$fixedEnergy)\n                     gp \u003c- ggplot()\n                     gp = gp + ylim(min(kv) - abs(labelpos), max(kv) + abs(labelpos)) + xlim(0,length(seq)*2)\n                     for(i in 1:length(seq)){\n                       eval(parse(text =#こうしないとうまくいかない。分からない。\n                                    paste0(\"gp \u003c- gp + geom_segment(aes(x = \",\n                                           2*i -2,\n                                           \" , y=\",\n                                           kv[seq[i]],\n                                           \", xend = \",\n                                           2*i -1,\n                                           \", yend=\",\n                                           kv[seq[i]],\n                                           \"))\")))\n                     }\n                     for(i in 1:length(seq)){\n                       eval(parse(text =#こうしないとうまくいかない。分からない。\n                                    paste0(\"gp \u003c- gp + geom_segment(aes(x = \",\n                                           2*i -2,\n                                           \" , y=\",\n                                           kv[seq[i]],\n                                           \", xend = \",\n                                           2*i -1,\n                                           \", yend=\",\n                                           kv[seq[i]],\n                                           \"))\")))\n                       eval(parse(text =\n                                    paste0(\"gp \u003c- gp + geom_text(aes(x = \",\n                                           2*i -1.5,\n                                           \" , y=\",\n                                           kv[seq[i]] + labelpos,\n                                           \",label=\\\"\",\n                                           self$getEntryFor(seq[i])$label,\n                                           \"\\\"))\")))\n                     }\n\n                     for(i in 1:length(self$links[,1])){\n                       eval(parse(text =\n                                    paste0(\"gp \u003c- gp + geom_segment(aes(x = \",\n                                           2*(1:length(seq))[seq==self$links[i,1]] -1,\n                                           \" , y=\",kv[self$links[i,1]],\n                                           \", xend = \",\n                                           (1:length(seq))[seq==self$links[i,2]]*2 -2,\n                                           \", yend=\",\n                                           kv[self$links[i,2]],\n                                           \"))\")))\n                     }\n                     title \u003c- getwd() %\u003e% {function(x) rev(strsplit(x,split = \"/\")[[1]])[1]}()\n                     gp \u003c- gp + labs(title = title) + xlab(\"\") + ylab(\"\")\n                     gp\n                   }\n                 )\n)\n\nIdenticalEntry \u003c- R6Class(\"IdenticalEntry\",\n                          public = list(\n                            initialize = function(path, parser = NULL, energy = NULL, pointGroup = NULL){\n                              self$path \u003c- path\n                              self$energy \u003c- energy\n                              self$pointGroup \u003c- pointGroup\n                              if(!is.null(parser)){\n                                res \u003c- self$parseInfoFromPath(parser)\n                                self$id \u003c- res[1]\n                                self$title \u003c- res[2]\n                                self$atomsInout \u003c- res[3]\n                                self$linkId \u003c- strsplit(self$atomsInout,split = \"\\\\+|\\\\-\")[[1]][1]\n                                label \u003c- strsplit(self$id,split = \"EQ|TS\")[[1]][2]\n                                self$label \u003c- ifelse(is.na(label), \"\",label)\n                              }\n\n                            },\n                            parseInfoFromPath = function(parser){\n                              parser(self$path)#parserはidとtitleとinoutのベクター\n                            },\n                            parseEnergyFromPath = function(parser){\n                              self$energy \u003c- parser(self$path)\n                            },\n                            parsepointGroupFromPath = function(parser){\n                              self$pointGroup \u003c- parser(self$path)\n                            },\n                            path = character(),\n                            id = character(),\n                            title = character(),\n                            atomsInout = character(),\n                            energy = numeric(),\n                            fixedEnergy = numeric(),\n                            pointGroup = character(),\n                            linkId = character(),\n                            label = character()\n                          )\n)\n\ndirNameParser \u003c- function(dirpath){\n  dirpath %\u003e%\n  {function(x) strsplit(x,\"_\")[[1]]}() %\u003e%\n  {function(x) c(paste0(x[1:3],collapse = \"\"),x[4],x[5])}()\n}\n\n```\n\n```r:main.R\n\ngetEnergy \u003c- function(dirpath){\n  dirpath %\u003e%\n    paste0(\"/file\") %\u003e%\n    read_lines %\u003e%\n    as.numeric\n}\n\na\u003c-Total$new()\ndir(\".\") %\u003e%\n  lapply(function(x) a$add(IdenticalEntry$new(x, dirNameParser, getEnergy(x)))) #ここのgetEnergy関数は自由に置き換え可能なので、gaussianやgamessのログから直接データをとりたしたいときなど、適宜関数を書き換えてください。\na$fixEnergy(\"10EQ1\")\na$plot(1)\na$links\na$links %\u003c\u003e% rbind(c(\"33TS\", \"90EQ4\"))\na$plot(-1)\n```\n![image.png](https://qiita-image-store.s3.amazonaws.com/0/158368/036b8418-bacc-ab4c-2f6d-3cfc135d9db1.png)\n\nはい出来ました！\n\n#補足　エネルギーダイアグラムは何が嬉しいのか\n\n化学合成において最適化すべき場所が分かります。\n\n化学合成において、最終的に同じ物質が出来る場合でも複数の経路が考えられます。\nこういうときに、エネルギーダイアグラムをつくってあげると、どちらの経路が重要な反応であるかが理解できます。\n今回の例だと、図でいう赤の経路の方が青の経路よりもエネルギーの高低差（活性化エネルギー）が小さく、反応において主要な経路であるといえます。\n\n![kagakuhannnou.png](https://qiita-image-store.s3.amazonaws.com/0/158368/059fb683-1088-309c-c8f2-339f37e4546e.png)\n\n\nそのため合成を最適化し収率などを高めたい場合、赤の経路の最適化を行えばよいことが分かります。\n逆に青の経路は主要な経路ではないので、いくら最適化しても収率などに変化はないと考えられ、時間や資金の無駄になります。\n\nそういった実験計画の判断基準をエネルギーダイアグラムは与えてくれ、リソースの無駄な消費を抑えることができます。\n\n#参考\nエネルギーダイアグラム作成時の計算手順\nhttp://xn--qck0d2a9as2853cudbqy0lc6cfz4a0e7e.xyz/theory/how-to-write-ezu\n似たようなことをされてる方\nhttp://pc-chem-basics.blog.jp/archives/2454069.html\n","coediting":false,"comments_count":0,"created_at":"2017-12-15T04:24:23+09:00","group":null,"id":"4d09762a6c439b87652d","likes_count":0,"private":false,"reactions_count":0,"tags":[{"name":"R","versions":[]},{"name":"chemoinformatics","versions":[]}],"title":"エネルギーダイアグラムを描こう","updated_at":"2017-12-15T04:24:23+09:00","url":"https://qiita.com/kyusque/items/4d09762a6c439b87652d","user":{"description":"プログラミングの勉強がしたいアカウント。だいたいR。時にC#,F#。視覚化ツールとしてのVR,AR,MRに興味があります(Unity)。 たまに研究のこと呟いたり、スケートのこと呟いたり","facebook_id":"","followees_count":3,"followers_count":1,"github_login_name":"kyusque","id":"kyusque","items_count":13,"linkedin_id":"","location":"Osaka, Japan","name":"","organization":"","permanent_id":158368,"profile_image_url":"https://qiita-image-store.s3.amazonaws.com/0/158368/profile-images/1506748308","twitter_screen_name":"kyusque","website_url":""}},{"rendered_body":"\u003cp\u003eHello world !!\u003cbr\u003e\n今回は、ifconfigコマンドに代わるipコマンドでIPv4アドレスを設定していきます。 \u003cbr\u003e\n簡単な備忘録なので、詳細は\u003cstrong\u003eman ip\u003c/strong\u003e (あるいは、\u003cstrong\u003eman ip-address\u003c/strong\u003e) コマンドで見てください。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"環境\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E7%92%B0%E5%A2%83\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e環境\u003c/h1\u003e\n\n\u003cul\u003e\n\u003cli\u003eCentOS 7.4 (on VirtualBox)\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"設定\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%A8%AD%E5%AE%9A\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e設定\u003c/h1\u003e\n\n\u003cp\u003e設定内容は、\u003cstrong\u003eipv4アドレス=192.168.0.1/24\u003c/strong\u003e、\u003cstrong\u003eネットワークデバイス名=enp0s3\u003c/strong\u003eとします。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e# ip address add 192.168.0.1/24 dev enp0s3\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e\u003cstrong\u003eip address\u003c/strong\u003e は、\u003cstrong\u003eip a\u003c/strong\u003e に省略可能です。\u003cbr\u003e\nちなみに、IPv6 address を設定したい場合は、アドレスの部分をIPv6にすれば設定できます。\u003c/p\u003e\n\n\u003cp\u003e設定内容の確認は、\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e$ ip a\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eあるいは、\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e$ ip a sh enp0s3\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e設定したアドレスを削除したい場合は\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan\u003e\u003c/span\u003e# ip a delete 192.168.0.1/24 dev enp0s3\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eと、コマンドを打ちます。\u003c/p\u003e\n\n\u003cp\u003e楽勝ですね♪\u003c/p\u003e\n","body":"Hello world !!\n今回は、ifconfigコマンドに代わるipコマンドでIPv4アドレスを設定していきます。 \n簡単な備忘録なので、詳細は**man ip** (あるいは、**man ip-address**) コマンドで見てください。\n\n# 環境\n- CentOS 7.4 (on VirtualBox)\n\n# 設定\n設定内容は、**ipv4アドレス=192.168.0.1/24**、**ネットワークデバイス名=enp0s3**とします。\n\n```\n# ip address add 192.168.0.1/24 dev enp0s3\n```\n\n**ip address** は、**ip a** に省略可能です。\nちなみに、IPv6 address を設定したい場合は、アドレスの部分をIPv6にすれば設定できます。\n\n\n\n設定内容の確認は、\n\n```\n$ ip a\n```\n\nあるいは、\n\n```\n$ ip a sh enp0s3\n```\n\n\n設定したアドレスを削除したい場合は\n\n```\n# ip a delete 192.168.0.1/24 dev enp0s3\n```\nと、コマンドを打ちます。\n\n楽勝ですね♪\n","coediting":false,"comments_count":0,"created_at":"2017-12-15T04:16:03+09:00","group":null,"id":"767bf88e73d0fe2fb230","likes_count":0,"private":false,"reactions_count":0,"tags":[{"name":"[Linux]","versions":[]},{"name":"[centos]","versions":[]},{"name":"[IPv4]","versions":[]}],"title":"[とあるコンテスト: IPv4 address] ipコマンドを使って、IPv4 Address を設定","updated_at":"2017-12-15T04:16:03+09:00","url":"https://qiita.com/wslife/items/767bf88e73d0fe2fb230","user":{"description":"","facebook_id":"","followees_count":1,"followers_count":0,"github_login_name":null,"id":"wslife","items_count":13,"linkedin_id":"","location":"","name":"Z1you","organization":"","permanent_id":173064,"profile_image_url":"https://qiita-image-store.s3.amazonaws.com/0/173064/profile-images/1490883036","twitter_screen_name":null,"website_url":""}}]